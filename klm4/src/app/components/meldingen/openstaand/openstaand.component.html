<ng-template [ngIf]="!runnerAnimation">
  <h1>{{requestStatus.Drop_Off}}</h1>
  <div class="tabeldiv">
    <table class="table table-hover">
      <thead>
      <tr>
        <th>Location</th>
        <th>Deadline</th>
        <th>Planetype</th>
        <th>Equipmentype</th>
        <th>Status</th>
      </tr>
      </thead>
      <tbody *ngIf="'MECHANIC' !== userRole; else mechanic">
      <tr class="clickableRow"
          *ngFor="let melding of meldingService.mechanicMeldingen; let i = index"
          (click)="unfoldRow(i, $event.target.parentNode)">
        <ng-container *ngIf="melding.status === requestStatus.Drop_Off">
          <ng-container *ngIf="!expandedInfo[i]; else extraInfo">
            <td>{{melding.location}}</td>
            <td>{{melding.deadline.toLocaleTimeString().substr(0, 5)}}</td>
            <td>{{melding.planetype}}</td>
            <td>{{melding.wagonType}}</td>
            <td>{{melding.status}}</td>
          </ng-container>

          <ng-template #extraInfo>
            <td colspan="99" style="padding: 0;">
              <table class="extraInfoTable">
                <tr class="clickableRow">
                  <td colspan="99" class="extraInfoHeader">
                    <i class="fa fa-chevron-down"></i>
                  </td>
                </tr>
                <tr>
                  <th>Location</th>
                  <td>{{melding.location}}</td>
                  <th>deadline</th>
                  <td>{{melding.deadline.toLocaleTimeString().substr(0, 5)}}</td>
                </tr>
                <tr>
                  <th>Planetype</th>
                  <td>{{melding.planetype}}</td>
                  <th>Position</th>
                  <td>{{melding.position}}</td>
                </tr>
                <tr>
                  <th>Equipment</th>
                  <td>{{melding.wagonType}}</td>
                  <th>Status</th>
                  <td>{{melding.status}}</td>
                </tr>
                <tr *ngIf="melding.wagonType === equipmentlist.BANDENWAGEN">
                  <th>
                    Main Banden
                  </th>
                  <td>2</td>
                  <th>
                    Neus Banden
                  </th>
                  <td>2</td>
                </tr>
                <tr>
                  <td colspan="99" class="btn-container">
                    <button class="acceptBtn btnShape"
                            *ngIf="melding.status !== requestStatus.Accepted"
                            (click)="showPopUp(i)"
                            [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Accepteren
                    </button>
                    <button class="ophaalbtn btnShape"
                            *ngIf="melding.status === requestStatus.Accepted"
                            (click)="popUp(i)"
                            [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Bezorgen
                    </button>
                    <button class="deleteBbtn btnShape"
                            *ngIf="melding.status === requestStatus.Accepted"
                            [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Annuleren
                    </button>
                    <app-damaged-form #damageForm
                                      (click)="openDamageForm()"
                                      *ngIf="melding.status === requestStatus.Accepted"
                                      [ngStyle]="{'width': 100 / numberOfButtons + '%'}"></app-damaged-form>
                  </td>
                </tr>
                <tr class="clickableRow">
                  <td colspan="99" class="extraInfoHeader">
                    <i class="fa fa-chevron-up"></i>
                  </td>
                </tr>
              </table>
            </td>
          </ng-template>
        </ng-container>
      </tr>
      </tbody>

      <ng-template #mechanic>
        <tbody>
        <tr class="clickableRow"
            *ngFor="let melding of meldingService.mechanicMeldingen; let i = index"
            (click)="unfoldRow(i, $event.target.parentNode)">
          <ng-container *ngIf="melding.id == this.id && melding.status !== requestStatus.Collect">
            <ng-container *ngIf="!expandedInfo[i]; else extraInfo">
              <td>{{melding.location}}</td>
              <td>{{melding.deadline.toLocaleTimeString().substr(0,5)}}</td>
              <td>{{melding.planetype}}</td>
              <td>{{melding.wagonType}}</td>
              <td>{{melding.status}}</td>
            </ng-container>
            <ng-template #extraInfo>
              <td colspan="99" style="padding: 0;">
                <table class="extraInfoTable">
                  <tr class="clickableRow">
                    <td colspan="99" class="extraInfoHeader">
                      <i class="fa fa-chevron-down"></i>
                    </td>
                  </tr>
                  <tr>
                    <th>Location</th>
                    <td>{{melding.location}}</td>
                    <th>deadline</th>
                    <td>{{melding.deadline.toLocaleTimeString().substr(0,5)}}</td>
                  </tr>
                  <tr>
                    <th>Planetype</th>
                    <td>{{melding.planetype}}</td>
                    <th>Position</th>
                    <td>{{melding.position}}</td>
                  </tr>
                  <tr>
                    <th>Equipment</th>
                    <td>{{melding.wagonType}}</td>
                    <th>Status</th>
                    <td>{{melding.status}}</td>
                  </tr>
                  <tr *ngIf="melding.wagonType === equipmentlist.BANDENWAGEN">
                    <th>
                      Main Banden
                    </th>
                    <td>2</td>
                    <th>
                      Neus Banden
                    </th>
                    <td>2</td>
                  </tr>
                  <tr>
                    <td colspan="99" class="btn-container">
                      <button class="deleteBbtn btnShape"
                              (click)="deleteRequest(i)"
                              [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Delete
                      </button>
                      <button class="ophaalbtn btnShape"
                              *ngIf="equipmentIsBezorgd"
                              (click)="ophaalPopUp(i)"
                              [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Finish
                      </button>
                      <app-damaged-form #damageForm
                                        (click)="openDamageForm()"
                                        *ngIf="equipmentIsBezorgd"
                                        [ngStyle]="{'width': 100 / numberOfButtons + '%'}"></app-damaged-form>
                    </td>
                  </tr>
                  <tr class="clickableRow">
                    <td colspan="99" class="extraInfoHeader">
                      <i class="fa fa-chevron-up"></i>
                    </td>
                  </tr>
                </table>
              </td>
            </ng-template>
          </ng-container>
        </tr>
        </tbody>
      </ng-template>
    </table>
  </div>
</ng-template>

<ng-template [ngIf]="!runnerAnimation">
  <div *ngIf="'MECHANIC' !== userRole">
    <h1>{{requestStatus.Collect}}</h1>
    <div class="tabeldiv">
      <table class="table table-hover">
        <thead>
        <tr>
          <th>Location</th>
          <th>Deadline</th>
          <th>Planetype</th>
          <th>Equipment type</th>
          <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr class="clickableRow"
            *ngFor="let melding of meldingService.mechanicMeldingen; let i = index"
            (click)="unfoldRow(i, $event.target.parentNode)">
          <ng-container *ngIf="melding.status === requestStatus.Collect">
            <ng-container *ngIf="!expandedInfo[i]; else extraInfo">
              <td>{{melding.location}}</td>
              <td>{{melding.deadline.toLocaleTimeString()}}</td>
              <td>{{melding.planetype}}</td>
              <td>{{melding.wagonType}}</td>
              <td>{{melding.status}}</td>
            </ng-container>

            <ng-template #extraInfo>
              <td colspan="99" style="padding: 0;">
                <table class="extraInfoTable">
                  <tr class="clickableRow">
                    <td colspan="99" class="extraInfoHeader">
                      <i class="fa fa-chevron-down"></i>
                    </td>
                  </tr>
                  <tr>
                    <th>Location</th>
                    <td>{{melding.location}}</td>
                    <th>deadline</th>
                    <td>{{melding.deadline.toLocaleString(getTime())}}</td>
                  </tr>
                  <tr>
                    <th>Planetype</th>
                    <td>{{melding.planetype}}</td>
                    <th>Position</th>
                    <td>{{melding.position}}</td>
                  </tr>
                  <tr>
                    <th>Equipment</th>
                    <td>{{melding.wagonType}}</td>
                    <th>Status</th>
                    <td>{{melding.status}}</td>
                  </tr>
                  <tr *ngIf="melding.wagonType === equipmentlist.BANDENWAGEN">
                    <th>
                      Main Banden
                    </th>
                    <td>2</td>
                    <th>
                      Neus Banden
                    </th>
                    <td>2</td>
                  </tr>
                  <tr>
                    <td colspan="99" class="btn-container">
                      <button class="acceptBtn btnShape"
                              *ngIf="melding.status !== 'Geaccepteerd'"
                              (click)="showPopUp(i)"
                              [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Accepteren
                      </button>
                      <button class="ophaalbtn btnShape"
                              *ngIf="melding.status === 'Geaccepteerd'"
                              (click)="popUp(i)"
                              [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Bezorgen
                      </button>
                      <button class="deleteBbtn btnShape"
                              *ngIf="melding.status === 'Geaccepteerd'"
                              [ngStyle]="{'width': 100 / numberOfButtons + '%'}">Annuleren
                      </button>
                      <app-damaged-form #damageForm
                                        (click)="openDamageForm()"
                                        *ngIf="melding.status === 'Geaccepteerd'"
                                        [ngStyle]="{'width': 100 / numberOfButtons + '%'}"></app-damaged-form>
                    </td>
                  </tr>
                  <tr class="clickableRow">
                    <td colspan="99" class="extraInfoHeader">
                      <i class="fa fa-chevron-up"></i>
                    </td>
                  </tr>
                </table>
              </td>
            </ng-template>
          </ng-container>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</ng-template>
<ng-template [ngIf]="runnerAnimation">
  <app-runner-animation></app-runner-animation>
</ng-template>


